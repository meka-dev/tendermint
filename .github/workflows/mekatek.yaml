name: mekatek
on: create

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify new source tag
        if: ${{ startsWith(github.ref, 'refs/tags/mekatek') && contains(github.ref, '@') }}
        uses: peter-evans/repository-dispatch@v2
        with:
          token: ${{ secrets.GH_TOKEN }}
          repository: meka-dev/engine
          event-type: new-source-tag
          client-payload: '{"repo": "${{ github.repository }}", "ref": "${{ github.ref }}", "sha": "${{ github.sha }}"}'
